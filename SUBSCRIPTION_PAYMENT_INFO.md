# معلومات الدفع والاشتراك - نظام الموافقة

## طرق الدفع المتاحة

### 1. InstaPay
- رقم الهاتف: **01002840633**
- الدفع الفوري عبر InstaPay

### 2. Vodafone Cash
- رقم الهاتف: **01140558803**
- محفظة فودافون كاش

### 3. Orange Money
- رقم الهاتف: **01140558803**
- محفظة أورانج موني

### 4. Etisalat Cash
- رقم الهاتف: **01140558803**
- محفظة اتصالات كاش

---

## الباقات المتاحة

### 1. الباقة الشهرية
- السعر: **99 ج.م** شهرياً
- المدة: شهر واحد
- المميزات:
  - جميع المميزات
  - دعم فني
  - تحديثات مستمرة
  - استضافة مجانية

### 2. الباقة نصف السنوية (الأكثر شعبية)
- السعر: **499 ج.م** لمدة 6 أشهر
- السعر الأصلي: ~~594 ج.م~~
- خصم: **15%**
- المميزات:
  - جميع المميزات
  - دعم فني
  - تحديثات مستمرة
  - استضافة مجانية
  - خصم 15%

### 3. الباقة السنوية (أفضل قيمة)
- السعر: **899 ج.م** لمدة سنة كاملة
- السعر الأصلي: ~~1188 ج.م~~
- خصم: **25%**
- المميزات:
  - جميع المميزات
  - دعم فني
  - تحديثات مستمرة
  - استضافة مجانية
  - خصم 25%
  - أولوية في الدعم

---

## نظام الموافقة على التجديد

### كيف يعمل النظام؟

#### 1. المشترك يقدم طلب التجديد:
- يختار الباقة المناسبة
- يختار طريقة الدفع
- يحول المبلغ إلى الرقم المحدد
- يدخل رقم هاتفه الذي حول منه
- يرسل الطلب

#### 2. الطلب يذهب إلى Super Admin:
- يظهر الطلب في صفحة "طلبات التجديد"
- يحتوي على جميع بيانات المشترك والدفع
- حالة الطلب: "قيد المراجعة"

#### 3. Super Admin يراجع الطلب:
- يتحقق من تحويل المبلغ
- يمكنه الموافقة أو الرفض

#### 4. عند الموافقة:
- يتم تجديد الاشتراك تلقائياً
- يتم تحديث تاريخ انتهاء الاشتراك
- يصبح الموقع نشطاً مرة أخرى

#### 5. عند الرفض:
- يتم إدخال سبب الرفض
- يمكن للمشترك رؤية سبب الرفض
- يمكنه تقديم طلب جديد

---

## الملفات المتأثرة

### Models
- `models/SubscriptionRequest.ts` - نموذج طلبات التجديد
- `models/index.ts` - تصدير النموذج الجديد

### API Routes
- `app/api/subscription/request/route.ts` - إنشاء طلب تجديد
- `app/api/super-admin/subscription-requests/approve/route.ts` - الموافقة على الطلب
- `app/api/super-admin/subscription-requests/reject/route.ts` - رفض الطلب

### Pages
- `app/admin/subscription/page.tsx` - صفحة الاشتراك للمشترك (تعرض الطلبات المعلقة)
- `app/super-admin/subscription-requests/page.tsx` - صفحة إدارة الطلبات

### Components
- `components/admin/SubscriptionManager.tsx` - تم تحديث العملة والتدفق
- `components/super-admin/SubscriptionRequestsManager.tsx` - إدارة الطلبات
- `components/super-admin/SuperAdminNav.tsx` - إضافة رابط الطلبات

### Library
- `lib/subscription-middleware.ts` - وظائف إنشاء والموافقة/رفض الطلبات

---

## التغييرات الرئيسية

1. ✅ تم تغيير العملة من ر.س (ريال سعودي) إلى ج.م (جنيه مصري)
2. ✅ تم إنشاء نظام طلبات التجديد
3. ✅ تم إضافة صفحة للـ Super Admin لمراجعة الطلبات
4. ✅ تم إضافة إشعارات للمشترك بحالة طلباته
5. ✅ تم ربط الموافقة بتجديد الاشتراك تلقائياً

---

## ملاحظات مهمة

- الطلبات المعلقة تظهر للمشترك في صفحة الاشتراك
- Super Admin يمكنه رؤية جميع الطلبات (معلقة، موافق عليها، مرفوضة)
- عند الموافقة، يتم تجديد الاشتراك تلقائياً باستخدام الدالة `renewSubscription`
- يمكن تصفية الطلبات حسب الحالة
- يتم عرض إحصائيات الطلبات في أعلى الصفحة

---

## مثال على تدفق العمل

```
المشترك يختار باقة (499 ج.م)
         ↓
يحول المبلغ إلى 01140558803
         ↓
يدخل رقمه ويرسل الطلب
         ↓
الطلب يظهر في صفحة Super Admin
         ↓
Super Admin يتحقق من التحويل
         ↓
يوافق على الطلب
         ↓
✅ يتم تجديد الاشتراك تلقائياً
         ↓
المشترك يرى الاشتراك نشط
```

---

## الدعم الفني

إذا واجهت أي مشكلة في عملية الدفع أو التجديد، يرجى التواصل معنا عبر:
- البريد الإلكتروني: support@example.com
- الهاتف: 01002840633
